{% extends 'base.htm' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>


<body>
    {% block content %}
    <div class="card">
                                <form method="post">
        {% csrf_token %}
        <div class="cars-make">
            <div class="card-header">
                <h4>Settings</h4>
                <div class="sub-title">Company Car</div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-lg-12">
        <div class="form-row">
        <div class="form-group col-lg-3">
        <label for="name_of_company">Name of company</label>
        <input type="text" class="form-control" id="name_of_company" name="name_of_company" value="{{company_data.name_of_company}}">
        </div>
        <div class="form-group col-lg-3">
        <label for="language">Language</label>
        <input type="text" class="form-control" id="language" value="{{company_data.language}}" name="language">
        </div>
        <div class="form-group col-lg-3">
        <label for="legal_name">Legal name of business</label>
        <input type="text" class="form-control" id="legal_name" value="{{company_data.legal_name_of_business}}" name="legal_name">
        </div>
        <div class="form-group col-lg-3">
        <img alt="Logo" class="company_logo" src="https://partner.localrent.com/assets/widget/default-car.png" style="
            position: absolute;
            top: -41px;
        ">
        </div>
        </div>
        <div class="form-row">
        <div class="form-group col-lg-3">
        <label for="phone_number">Phone</label>
        <input type="text" class="form-control" id="phone_number" value="{{company_data.phone_number}}" name="phone_number" placeholder="">
        </div>
        <div class="form-group col-lg-3">
        <label for="second_phone">Second phone</label>
        <input type="text" class="form-control" id="second_phone" value="{{company_data.second_phone}}" name="second_phone">
        </div>
        <div class="form-group col-lg-3">
        <label for="country">Country</label>
        <input type="text" class="form-control" id="country" value="{{company_data.country}}" name="country">
        </div>
        <div class="form-group col-lg-3">
        <label for="central_office_location">Ð¡entral office location</label>
         <select class="form-control" id="central_office_location" name="central_office_location">
            {% for i in city %}
                {% if i == company_data.central_office_location %}
                    <option selected>{{ i }}</option>
                {% else %}
                    <option>{{ i }}</option>
                {% endif %}
            {% endfor %}
        </select>
<!--        <input type="file" class="form-control" id="central_office_location" name="central_office_location">-->
        </div>
        </div>
        <div class="form-row">
        <div class="form-group col-lg-3">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" value="{{company_data.email}}" name="email" placeholder="">
        </div>
        <div class="form-group col-lg-3">
        <label for="website">Web-site</label>
        <input type="text" class="form-control" id="website" value="{{company_data.website}}" name="website">
        </div>
        <div class="form-group col-lg-3">
        <label for="central_office_address">Central office address</label>
        <input type="text" class="form-control" id="central_office_address" value="{{company_data.central_office_address}}" name="central_office_address">
        </div>
        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="cars-insurance">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Working days </h4>
                    </div>
                    <div class="col-md-6">
                        <h4>Public holidays</h4>
                        <p>On these days, it is not possible to rent or return cars, even at extra cost. For example, New Year, major religious or national holidays, etc.</p>
                    </div>
                </div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-md-6">
                        <div class="row-fluid">
  <div class="work-day-container">
    <div class="field">
      <label class="checkbox-wrapper" for="company_monday">
        <input name="company[monday]" type="hidden" value="0">
        <div class="ez-checkbox ez-checked">
          <input checked="checked" class="work-day-checkbox ez-hide" id="company_monday" name="company[monday]" type="checkbox" value="1">
        </div>
        Monday <span class="slider-status"></span>
      </label>
    </div>
  </div>
  <div class="work-slider-box enable" data-status="enable">
    <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
      <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
    </div>
    <input class="start-time-field" id="company_monday_start" name="company[monday_start]" type="hidden" value="1440">
    <input class="end-time-field" id="company_monday_end" name="company[monday_end]" type="hidden" value="1440">
  </div>
</div>
                        <!-- Repeat the above structure for each day of the week -->
                        <!-- Tuesday -->
                        <div class="row-fluid">
                          <div class="work-day-container">
                            <div class="field">
                              <label class="checkbox-wrapper" for="company_tuesday">
                                <input name="company[tuesday]" type="hidden" value="0">
                                <div class="ez-checkbox ez-checked">
                                  <input checked="checked" class="work-day-checkbox ez-hide" id="company_tuesday" name="company[tuesday]" type="checkbox" value="1">
                                </div>
                                Tuesday <span class="slider-status"></span>
                              </label>
                            </div>
                          </div>
                          <div class="work-slider-box enable" data-status="enable">
                            <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
                              <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                            </div>
                            <input class="start-time-field" id="company_tuesday_start" name="company[tuesday_start]" type="hidden" value="1440">
                            <input class="end-time-field" id="company_tuesday_end" name="company[tuesday_end]" type="hidden" value="1440">
                          </div>
                        </div>
                        <!-- Wednesday -->
                        <div class="row-fluid">
                          <div class="work-day-container">
                            <div class="field">
                              <label class="checkbox-wrapper" for="company_wednesday">
                                <input name="company[wednesday]" type="hidden" value="0">
                                <div class="ez-checkbox ez-checked">
                                  <input checked="checked" class="work-day-checkbox ez-hide" id="company_wednesday" name="company[wednesday]" type="checkbox" value="1">
                                </div>
                                Wednesday <span class="slider-status"></span>
                              </label>
                            </div>
                          </div>
                          <div class="work-slider-box enable" data-status="enable">
                            <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
                              <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                            </div>
                            <input class="start-time-field" id="company_wednesday_start" name="company[wednesday_start]" type="hidden" value="1440">
                            <input class="end-time-field" id="company_wednesday_end" name="company[wednesday_end]" type="hidden" value="1440">
                          </div>
                        </div>
                        <!-- Thursday -->
                        <div class="row-fluid">
                          <div class="work-day-container">
                            <div class="field">
                              <label class="checkbox-wrapper" for="company_thursday">
                                <input name="company[thursday]" type="hidden" value="0">
                                <div class="ez-checkbox ez-checked">
                                  <input checked="checked" class="work-day-checkbox ez-hide" id="company_thursday" name="company[thursday]" type="checkbox" value="1">
                                </div>
                                Thursday <span class="slider-status"></span>
                              </label>
                            </div>
                          </div>
                          <div class="work-slider-box enable" data-status="enable">
                            <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
                              <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                              <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
                            </div>
                            <input class="start-time-field" id="company_thursday_start" name="company[thursday_start]" type="hidden" value="1440">
                            <input class="end-time-field" id="company_thursday_end" name="company[thursday_end]" type="hidden" value="1440">
                          </div>
                        </div>
                        <!-- Friday -->
<div class="row-fluid">
  <div class="work-day-container">
    <div class="field">
      <label class="checkbox-wrapper" for="company_friday">
        <input name="company[friday]" type="hidden" value="0">
        <div class="ez-checkbox ez-checked">
          <input checked="checked" class="work-day-checkbox ez-hide" id="company_friday" name="company[friday]" type="checkbox" value="1">
        </div>
        Friday <span class="slider-status"></span>
      </label>
    </div>
  </div>
  <div class="work-slider-box enable" data-status="enable">
    <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
      <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
    </div>
    <input class="start-time-field" id="company_friday_start" name="company[friday_start]" type="hidden" value="1440">
    <input class="end-time-field" id="company_friday_end" name="company[friday_end]" type="hidden" value="1440">
  </div>
</div>

<!-- Saturday -->
<div class="row-fluid">
  <div class="work-day-container">
    <div class="field">
      <label class="checkbox-wrapper" for="company_saturday">
        <input name="company[saturday]" type="hidden" value="0">
        <div class="ez-checkbox ez-checked">
          <input checked="checked" class="work-day-checkbox ez-hide" id="company_saturday" name="company[saturday]" type="checkbox" value="1">
        </div>
        Saturday <span class="slider-status"></span>
      </label>
    </div>
  </div>
  <div class="work-slider-box enable" data-status="enable">
    <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
      <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
    </div>
    <input class="start-time-field" id="company_saturday_start" name="company[saturday_start]" type="hidden" value="1440">
    <input class="end-time-field" id="company_saturday_end" name="company[saturday_end]" type="hidden" value="1440">
  </div>
</div>

<!-- Sunday -->
<div class="row-fluid">
  <div class="work-day-container">
    <div class="field">
      <label class="checkbox-wrapper" for="company_sunday">
        <input name="company[sunday]" type="hidden" value="0">
        <div class="ez-checkbox ez-checked">
          <input checked="checked" class="work-day-checkbox ez-hide" id="company_sunday" name="company[sunday]" type="checkbox" value="1">
        </div>
        Sunday <span class="slider-status"></span>
      </label>
    </div>
  </div>
  <div class="work-slider-box enable" data-status="enable">
    <div class="work-slider ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
      <div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 100%; width: 0%;"></div>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
      <a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 100%;">24:00</a>
    </div>
    <input class="start-time-field" id="company_sunday_start" name="company[sunday_start]" type="hidden" value="1440">
    <input class="end-time-field" id="company_sunday_end" name="company[sunday_end]" type="hidden" value="1440">
  </div>
</div>

                    </div>
                    <div class="col-md-6">
                        <div class="span6">
                          <fieldset>
                            <div class="row-fluid">
                              <div class="holiday_weekends" id="holidayContainer">
                                <!-- Holiday instances will be added here -->
                              </div>
                              <a class="btn btn-primary btn-sm button middle add_season" onclick="addHoliday()" style="float: left; margin: 18px 50px 0px 0px; visibility: visible;" title="Add">Add</a>
                            </div>
                          </fieldset>
                        </div>
<style>
  .span12 {
    display: flex;
    justify-content: start;
    align-items: center;
    margin-bottom: 10px;
  }

  .field {
    margin-right: 10px;
  }

  .remove-holiday {
    color: red;
    cursor: pointer;
  }
</style>
<script>
  let holidayIndex = 0;

  function addHoliday() {
    holidayIndex++;

    const holidayContainer = document.getElementById("holidayContainer");

    const holidayTemplate = `
      <div class="span12">
        <div class="span1 field start-day" style="width: 15%;">
            <input type="hidden" value="${holidayIndex}" name="holidayIndex"/>
          <select name="day_${holidayIndex}">
            <!-- Days will be dynamically generated using JavaScript -->
          </select>
        </div>
        <div class="span2 field select-a-month">
          <select name="month_${holidayIndex}" onchange="updateDaysAndYears(this)">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
          </select>
        </div>
        <div class="span3 field select-a-year">
          <select name="year_${holidayIndex}">
            <!-- Years will be dynamically generated using JavaScript -->
          </select>
        </div>
        <div class="span1 field">
          <a class="fa fa-trash remove-holiday" onclick="removeHoliday(this)" style="padding: 10px 0px; font-size: 24px;"></a>
        </div>
        <div class="span3 field">
          <input class="weekend_date" name="weekend_date_${holidayIndex}" type="hidden">
          <input class="use_annually" name="use_annually_${holidayIndex}" type="hidden" value="true">
        </div>
      </div>
    `;

    const holidayElement = document.createElement("fieldset");
    holidayElement.classList.add("nested_fields", "nested_company_holiday_weekends");
    holidayElement.innerHTML = holidayTemplate;

    holidayContainer.appendChild(holidayElement);

    // Initialize days and years for the initial month (January)
    updateDaysAndYears(holidayElement.querySelector(`[name=month_${holidayIndex}]`));

    // Ensure days are initially populated
    updateDays(holidayElement.querySelector(`[name=month_${holidayIndex}]`));
  }

  function removeHoliday(button) {
    const holidayElement = button.closest(".span12");
    holidayElement.remove();
  }

  function updateDaysAndYears(selectElement) {
    const daysSelect = selectElement.parentElement.parentElement.querySelector(`[name^=day_]`);
    const yearSelect = selectElement.parentElement.parentElement.querySelector(`[name^=year_]`);
    const month = parseInt(selectElement.value, 10);
    const daysInMonth = new Date(parseInt(yearSelect.value), month, 0).getDate(); // Getting the last day of the selected month
    const currentYear = new Date().getFullYear();

    // Clear previous options
    daysSelect.innerHTML = "";
    yearSelect.innerHTML = "";

    // Populate days based on the number of days in the selected month
    for (let day = 1; day <= daysInMonth; day++) {
      const option = document.createElement("option");
      option.value = day;
      option.textContent = day;
      daysSelect.appendChild(option);
    }

    // Populate years for the current year and the next few years
    for (let year = currentYear; year <= currentYear + 5; year++) {
      const option = document.createElement("option");
      option.value = year;
      option.textContent = year;
      yearSelect.appendChild(option);
    }
  }

function updateDays(monthSelect) {
  const daysSelect = monthSelect.parentElement.parentElement.querySelector(`[name^=day_]`);
  const yearSelect = monthSelect.parentElement.parentElement.querySelector(`[name^=year_]`);
  const month = parseInt(monthSelect.value, 10);

  const daysInMonth = new Date(parseInt(yearSelect.value), month, 0).getDate();
  const selectedDay = parseInt(daysSelect.value, 10);

  // Clear previous options
  daysSelect.innerHTML = "";

  // Populate days based on the number of days in the selected month
  for (let day = 1; day <= daysInMonth; day++) {
    const option = document.createElement("option");
    option.value = day;
    option.textContent = day;
    daysSelect.appendChild(option);
  }

  // Set the selected day to the first day of the month if it exceeds the number of days in the new month
  if (selectedDay > daysInMonth) {
    daysSelect.value = 1;
  }
}
</script>


                        <br>
                    </div>
                </div>
            </div>
        </div>
<style>
   /* Add any custom styles for your slider here */
    .row-fluid {
      display: flex;
      align-items: center;
    }
    .work-day-container {
      flex: 1;
    }
    .work-slider-box {
      flex: 2;
    }
.checkbox-wrapper .ez-checkbox.ez-checked, .dropdown .ez-checkbox.ez-checked {
    background: #f5f5f5 center center no-repeat;
    background-image: url(https://partner.localrent.com/assets/private/check-mark-31b80419564c9caf599bba0864324b7d.png);
}
.checkbox-wrapper .ez-checkbox, .dropdown .ez-checkbox {
    width: 30px;
    height: 30px;
    float: left;
    margin-right: 12px;
    background: #f5f5f5;

}
.checkbox-wrapper .ez-checkbox input[type=checkbox], .dropdown .ez-checkbox input[type=checkbox] {
    display: block;
    width: 24px;
    height: 24px;
    opacity: 0;
}
.checkbox-wrapper, .dropdown {
    border: 2px solid #ededed;
    line-height: 34px;
    height: 36px;
    padding: 1px 12px 1px 1px;
        margin: 6px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
        box-sizing: border-box;
    display: block;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
}
    .ui-slider {
    margin: 0px 0 0;
    background: #C8c8c8;
    height: 12px;
    width: 85%;
}

.ui-slider .ui-slider-range {
    background: #66ccff
}

.ui-slider a.ui-slider-handle {
    padding: 0px 9px;
    font-size: 13px;
    text-decoration: none;
    color: #fff;
    outline: none;
    border: none;
    line-height: 38px;
    background: #66ccff;
    top: -15px;
    margin: 0 -12px;
    width: 55px;
    height: 38px;
}
</style>
                                    <!-- JavaScript libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
                                    <script>
  $(function() {
    // Iterate over each day of the week
    $(".work-slider").each(function() {
      var slider = $(this);
      var checkbox = slider.closest('.row-fluid').find('.work-day-checkbox');
      var statusIndicator = slider.closest('.row-fluid').find('.slider-status');

      // Initialize slider
      slider.slider({
        range: true,
        min: 0,
        max: 1440, // 24 hours * 60 minutes
        step: 15, // 15 minutes step
        values: [0, 1440], // initial values
        slide: function(event, ui) {
          var startMinutes = Math.floor(ui.values[0] / 60) * 60;
          var endMinutes = Math.floor(ui.values[1] / 60) * 60;
          var startTime = ("0" + Math.floor(startMinutes / 60)).slice(-2) + ":" + ("0" + (startMinutes % 60)).slice(-2);
          var endTime = ("0" + Math.floor(endMinutes / 60)).slice(-2) + ":" + ("0" + (endMinutes % 60)).slice(-2);
          slider.closest('.work-slider-box').find('.start-time-field').val(ui.values[0]);
          slider.closest('.work-slider-box').find('.end-time-field').val(ui.values[1]);
          slider.closest('.work-slider-box').find('.ui-slider-handle:first').text(startTime);
          slider.closest('.work-slider-box').find('.ui-slider-handle:last').text(endTime);
        }
      });

      // Listen for checkbox change
      checkbox.on('change', function() {
        if ($(this).is(':checked')) {
          slider.slider('enable');
          statusIndicator.text('(Enabled)');
        } else {
          slider.slider('disable');
          statusIndicator.text('(Disabled)');
        }
      });

      // Disable slider if checkbox is initially unchecked
      if (!checkbox.is(':checked')) {
        slider.slider('disable');
        statusIndicator.text('(Disabled)');
      }
    });
  });
</script>
                                    </script>

        <div class="cars-engine-chasis">
<div class="card-header">
    <div class="row">
        <div class="col-md-6">
            <h4>Payment for rent</h4>
        </div>
        <div class="col-md-6 ">
            <h4>Withholding of deposit</h4>

        </div>
    </div>
</div>

            <div class="card-block">
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox18" type="checkbox" checked="">
                <label for="checkbox18">
                    CASH
                </label>
            </div>
        </div>
            <div class="form-group ">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox19" type="checkbox">
                <label for="checkbox19">
                    VISA
                </label>
            </div>
        </div>
            <div class="form-group ">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox21" type="checkbox">
                <label for="checkbox21">
                    Master Card
                </label>
            </div>
        </div>
            <div class="form-group ">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox22" type="checkbox">
                <label for="checkbox22">
                    American Express
                </label>
            </div>
        </div>
            <div class="form-group ">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox23" type="checkbox">
                <label for="checkbox23">
                    Mir
                </label>
            </div>
        </div>
            <div class="form-group">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox24" type="checkbox">
                <label for="checkbox24">
                    Union Pay
                </label>
            </div>
        </div>
            <div class="form-group ">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox25" type="checkbox">
                <label for="checkbox25">
                    Stablecoins (USDT, USDC, BUSD)
                </label>
            </div>
        </div>
            <div class="form-group">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox26" type="checkbox">
                <label for="checkbox26">
                    Crypto (any coins)
                </label>
            </div>
        </div>

        </div>
        <div class="col-md-6 ">
            <div class="form-group">
            <div class="checkbox-color checkbox-primary">
                <input id="checkbox30" type="checkbox" checked="">
                <label for="checkbox30">
                    CASH
                </label>
            </div>
        </div>
        </div>
    </div>
            </div>
        </div>


        <div class="cars-music">
            <div class="card-header">
                <h4>Tariffs</h4>
<div id="tariffFields">
    {% for tariff in tariff %}
        <div class="tariff-container" data-tariff-id="{{ tariff.id }}">
            <label for="minDays">Min Days:</label>
            <input type="number" name="minDays[]" value="{{ tariff.min_days }}" required>
            <label for="maxDays">Max Days:</label>
            <input type="number" name="maxDays[]" value="{{ tariff.max_days }}" required>
            <button type="button" onclick="deleteTariffField(this)">Delete</button>
        </div>
    {% endfor %}
</div>
<button type="button" onclick="addTariffField()">Add Tariff</button>

<script>
    function addTariffField() {
        const tariffFields = document.getElementById('tariffFields');
        const lastTariffContainer = tariffFields.lastElementChild;

        // Get the last maximum days value
        const lastMaxDaysInput = lastTariffContainer.querySelector('[name="maxDays[]"]');
        const lastMaxDaysValue = parseInt(lastMaxDaysInput.value, 10);

        // Calculate new values
        const newMinDaysValue = lastMaxDaysValue + 1;
        let newMaxDaysValue = lastMaxDaysValue + 3;

        // Ensure the newMaxDaysValue does not exceed 31
        if (newMaxDaysValue > 31) {
            alert("Cannot add new tariff. Max Days would exceed 31.");
            return;
        }

        // Create a new set of fields
        const newTariffField = document.createElement('div');
        newTariffField.classList.add('tariff-container');
        newTariffField.innerHTML = `
            <label for="minDays">Min Days:</label>
            <input type="number" name="minDays[]" value="${newMinDaysValue}" required>
            <label for="maxDays">Max Days:</label>
            <input type="number" name="maxDays[]" value="${newMaxDaysValue}" required>
            <button type="button" onclick="deleteTariffField(this)">Delete</button>
        `;

        // Append the new set of fields to the container
        tariffFields.appendChild(newTariffField);

        // Get the existing tariffId if available
        const existingTariffContainer = $('#tariffFields .tariff-container:last');
        const tariffId = existingTariffContainer.data('tariff-id');


       // Use AJAX to create/update tariff on the server
        $.ajax({
            url: '{% url "save_tariff" %}',  // Replace with your Django URL for saving tariff
            type: 'POST',
            data: {minDays: newMinDaysValue, maxDays: newMaxDaysValue},
            success: function(response) {
                if (response.status === 'success') {
                    // Successfully created/updated tariff, update UI if needed
                    // For example, you might reload the list of tariffs after saving
                    //window.location.reload();
                } else {
                    alert('Failed to save tariff.');
                }
            },
            error: function() {
                alert('Error in AJAX request.');
            }
        });
    }

    function deleteTariffField(button) {
        const tariffContainer = $(button).closest('.tariff-container');
        const tariffId = tariffContainer.data('tariff-id');

        // Use AJAX to delete tariff on the server
        $.ajax({
            url: `/partner/delete_tariff/${tariffId}/`,  // Replace with your Django URL
            type: 'DELETE',
            success: function(response) {
                if (response.status === 'success') {
                    // Successfully deleted tariff, update UI if needed
                    tariffContainer.remove();
                } else {
                    alert('Failed to delete tariff.');
                }
            },
            error: function() {
                alert('Error in AJAX request.');
            }
        });
    }

    // Use AJAX to list tariffs on page load
    $.ajax({
        url: '/partner/list_tariffs/',  // Replace with your Django URL
        type: 'GET',
        success: function(response) {
            const tariffFields = $('#tariffFields');
            tariffFields.empty();  // Clear existing content

            response.tariffs.forEach(function(tariff) {
                const newTariffField = `
                    <div class="tariff-container" data-tariff-id="${tariff.id}">
                        <label for="minDays">Min Days:</label>
                        <input type="number" name="minDays[]" value="${tariff.min_days}" required>
                        <label for="maxDays">Max Days:</label>
                        <input type="number" name="maxDays[]" value="${tariff.max_days}" required>
                        <button type="button" onclick="deleteTariffField(this)">Delete</button>
                    </div>
                `;
                tariffFields.append(newTariffField);
            });
        },
        error: function() {
            alert('Error in AJAX request.');
        }
    });
</script>
                <div class="sub-title"></div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-lg-12">
                       
                    </div>
                </div>
            </div>
        </div>


        <div class="submit-button">
            <button type="submit" class="btn btn-primary"> Save</button>
        </div>
                                </form>
    </div>
    {% endblock %}
</body>
</html>