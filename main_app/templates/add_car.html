{% extends 'base.htm' %}
{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>


<body>
{% block content %}
<div class="card">
    <form id="car-form" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="cars-make">
            <div class="card-header">
                <h4>Car Editing</h4>
                <div class="sub-title">Company Car</div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-row">
                            <div class="form-group col-md-2">
                                <label for="brand">Brand</label>
                                <input type="text" data-validate class="form-control" id="brand" name="brand" placeholder="">
                                <div id="brand-error" class="error-message"></div>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="model">Model</label>
                                <input type="text" data-validate class="form-control" id="model" name="model">
                                <div id="model-error" class="error-message"></div>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="license_plate_no">License Plate No.</label>
                                <input type="text" data-validate class="form-control" id="license_plate_no" name="license_plate">
                                <div id="license_plate-error" class="error-message"></div>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="year_of_manufacture">Year of Manufacture</label>
                                <input type="text" data-validate class="form-control" id="year_of_manufacture"
                                       name="year_of_manufacture">
                                <div id="year_of_manufacture-error" class="error-message"></div>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="body_color">Body Color</label>
                                <input type="text" data-validate class="form-control" id="body_color" name="body_color">
                                <div id="body_color-error" class="error-message"></div>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="body_type">Body Type</label>
                                <input type="text" data-validate class="form-control" id="body_type" name="body_type">
                                <div id="body_type-error" class="error-message"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cars-prices-conditions">
            <div class="card-header">
                <h4>Price and Conditions</h4>
                <div class="sub-title"></div>
            </div>
            <div class="card-block">
                <style>
            /* Custom CSS for black table header */
            .table-black th {
                background-color: #01a9ac;
                color: #fff;
                 border-left: 1px solid #fff;
            }


                </style>
                <table class="table table-striped">
                    <thead class="table-black">
                    <tr>
                        <th></th>
                        {% for tariff in tariff %}
                        <th>{{ tariff.min_days }}—{{ tariff.max_days }} days</th>
                        {% endfor %}
                    </tr>
                    </thead>
                    <tbody>
{% for season in season %}
    <tr>
        <td>{{ season.name }} <span>{{ season.date_range }}</span></td>
        {% for tariff in tariff %}
            <td>
                {% for rate in existing_rates %}
                    {% if rate.season_id == season.id and rate.tariff_id == tariff.id %}
                        <!-- If there is a rate, display its value -->
                        <input type="text" class="form-control" name="rate_price_{{ season.id }}_{{ tariff.id }}" value="{{ rate.price }}">
                    {% endif %}

                {% endfor %}

                    <!-- If there is no rate, display '0' -->

                <!-- Hidden fields for car, season, and tariff IDs -->
                <input type="hidden" name="rate_car_{{ season.id }}_{{ tariff.id }}" value="{{ car.id }}">
                <input type="hidden" name="rate_season_{{ season.id }}_{{ tariff.id }}" value="{{ season.id }}">
                <input type="hidden" name="rate_tariff_{{ season.id }}_{{ tariff.id }}" value="{{ tariff.id }}">
            </td>
        {% endfor %}
    </tr>
{% endfor %}
                    <!-- Add more rows as needed -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="cars-mileage">
            <div class="card-header">
                <h4>Mileage Limit</h4>
                <div class="sub-title"></div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="form-row">
                            <div class="form-group col-md-2">
                                <div style="margin-top: 28px;" class="checkbox-color checkbox-primary">
                                    <input id="mileage-0" name="mileage_unlimited" type="checkbox" checked>
                                    <label for="mileage-0">
                                        Unlimited
                                    </label>
                                </div>
                                <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
                                <script>
            $(document).ready(function() {
                // Handler for the checkbox change event
                $('#mileage-0').change(function() {
                    if ($(this).is(':checked')) {
                        // If checkbox is checked, hide the fields
                        $('#limitedMileageContainer').hide();
                        $('#overageFeesContainer').hide();
                    } else {
                        // If checkbox is unchecked, show the fields
                        $('#limitedMileageContainer').show();
                        $('#overageFeesContainer').show();
                    }
                });
            });


                                </script>
                            </div>
                            <div id="limitedMileageContainer" class="form-group col-md-2" style="display: none;">
                                <label for="limitedMileage">Limit</label>
                                <input type="text" class="form-control" id="limitedMileage" name="mileage_limited"
                                       placeholder="">
                            </div>
                            <div id="overageFeesContainer" class="form-group col-md-2" style="display: none;">
                                <label for="overageFees">Overage fee</label>
                                <input type="text" class="form-control" id="overageFees" name="mileage_overage_fee"
                                       placeholder="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cars-insurance">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Insurance</h4>
                        <br>
                    </div>
                    <div class="col-md-6">
                        <h4>Extras</h4>
                        <br>
                    </div>
                </div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-row">
                            <div class="form-group col-md-5">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="insurance-0-franchise" name="insurance-0-franchise" type="checkbox"
                                           checked>
                                    <label for="insurance-0-franchise">
                                        Franchise
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-5">
                                <input type="text" class="form-control" id="insurance-0-deposit"
                                       name="insurance-0-deposit" placeholder="">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-5">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="checkbox8" type="checkbox" checked>
                                    <label for="checkbox8">
                                        Deposit
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-5">
                                <input type="text" class="form-control" id="" name="Deposit" placeholder="">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <table id="extrasTable" class="table table-striped footable footable-1 footable-paging footable-paging-center breakpoint-lg"
                               style="">
                            <thead class="table-black">
                            <tr class="footable-header">

                                <th class="footable-sortable footable-first-visible" style="display: table-cell;">
                                    Name<span
                                        class="fooicon fooicon-sort"></span></th>
                                <th class="footable-sortable" style="display: table-cell;">Price per
                                    day<span
                                            class="fooicon fooicon-sort"></span></th>
                                <th class="footable-sortable" style="display: table-cell;">Minimal price<span
                                        class="fooicon fooicon-sort"></span></th>
                                <th class="footable-sortable" style="display: table-cell;">Maximum price<span
                                        class="fooicon fooicon-sort"></span></th>
                                <th class="footable-sortable footable-last-visible" style="display: table-cell;">
                                    <span class="fooicon fooicon-sort"></span></th>
                            </tr>
                            </thead>
                            <tbody>

                            <!-- Add more rows as needed -->
                            {% for extra in extras %}
                                  <tr>
                                      <td class="name" data-extra-id="{{ extra.id }}" data-extra-name="{{ extra.name }}">{{ extra.name }}</td>
                                      <td class="pricePerDay"> — </td>
                                      <td class="minimalPrice"> — </td>
                                      <td class="maximumPrice"> — </td>
                                      <td>
                                          <select style="width:100%;" class="extraSelect" data-extra-id="{{ extra.id }}">
                                              <option value="">---</option>
                                              {% for car_extra in extra.car_extras.all %}
                              <option value="{{ car_extra.id }}">
                                  ${{ car_extra.price_per_day }}/${{ car_extra.minimal_price }}/${{ car_extra.maximum_price }}
                              </option>
                          {% endfor %}
                                          </select>
                                      </td>
                                  </tr>
                              {% endfor %}

                            </tbody>
                            <tfoot></tfoot>
                        </table>
                             <script>
      $(document).ready(function () {
          $('#extrasTable tbody').on('change', '.extraSelect', function () {
              var selectedOption = $(this).val();
              var row = $(this).closest('tr');
              var nameCell = row.find('.name');
              var extraId = nameCell.data('extra-id');
              var extraName = nameCell.data('extra-name');

              if (selectedOption === "") {
                  // If '---' is selected, update the content of the <td> without <a> tag
                  nameCell.html(extraName);
                      row.find('.pricePerDay').text(" — ");
                      row.find('.minimalPrice').text(" — ");
                      row.find('.maximumPrice').text(" — ");
              } else {
                  // If an option other than '---' is selected, update the content of the <td> with <a> tag
                  var editLink = '<a href="/partner/extra-costs/' + selectedOption + '/edit/' + '" target="_blank">' + extraName + '</a>';
                  nameCell.html(editLink);
              }

              // Rest of your AJAX code for updating price-related fields
              $.ajax({
                  url: '/partner/get_extra_details/' + selectedOption + '/',
                  method: 'GET',
                  success: function (data) {
                      // Update the price-related fields in the same row
                        row.find('.pricePerDay').text(data.price_per_day);
                      row.find('.minimalPrice').text(data.minimal_price);
                      row.find('.maximumPrice').text(data.maximum_price);
                  },
                  error: function () {
                      console.error('Error fetching extra details');
                  }
              });
          });
      });
  </script>
                        <br>
                    </div>
                </div>
            </div>
        </div>

        <div class="cars-engine-chasis">
            <div class="card-header">
                <div class="row">
                    <div class="col-md-6">
                        <h4>Engine</h4>
                    </div>
                    <div class="col-md-6 ">
                        <h4>Chassis</h4>

                    </div>
                </div>
            </div>

            <div class="card-block">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group row">
                            <label for="car_details-0-engine_type" class="col-md-4 col-form-label">Engine type</label>
                            <div class="col-md-4">
                                <input type="text" name="engine_type" maxlength="50" class="form-control"
                                       id="id_car_details-0-engine_type">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-capacity" class="col-md-4 col-form-label">Capacity </label>
                            <div class="col-md-4">
                                <input class="form-control" type="number" name="engine_capacity" step="0.01"
                                       id="car_details-0-capacity">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-fuel_type" class="col-md-4 col-form-label">Fuel </label>
                            <div class="col-md-4">
                                <select class="form-control" id="car_details-0-fuel_type" name="fuel_type">
                                    <option value="Benzin">Benzin</option>
                                    <option value="Dizel">Dizel</option>
                                    <option value="Hybrid">Hybrid</option>
                                    <option value="Turbo Dizel">Turbo Dizel</option>
                                    <option value="Gaz">Gaz</option>
                                    <option value="Electricity">Electricity</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-tank_size" class="col-md-4 col-form-label">Tank </label>
                            <div class="col-md-4">
                                <input class="form-control" type="number" name="tank_size" step="0.01"
                                       id="car_details-0-tank_size">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-fuel_consumption" class="col-md-4 col-form-label">Fuel consumption
                                (l/100 km)</label>
                            <div class="col-md-4">
                                <input class="form-control" type="number" name="fuel_consumption" step="0.01"
                                       id="car_details-0-fuel_consumption">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 ">
                        <div class="form-group row">
                            <label for="car_details-0-transmission" class="col-md-3 col-form-label">Transmission</label>
                            <div class="col-md-4">
                                <select class="form-control" id="car_details-0-transmission" name="transmission">
                                    <option value="Manual">Manual</option>
                                    <option value="Automatic">Automatic</option>
                                    <option value="Automatic + Manumatic">Automatic + Manumatic</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-drive_type" class="col-md-3 col-form-label">Drive</label>
                            <div class="col-md-4">
                                <select class="form-control" id="car_details-0-drive_type" name="drive_type">
                                    <option value="Front wheel">Front wheel</option>
                                    <option value="Rear wheel">Rear wheel</option>
                                    <option value="4 wheel">4 wheel</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-abs_system" class="col-md-3 col-form-label">ABS</label>
                            <div class="col-md-4">
                                <div class="checkbox-grey checkbox-nxt">
                                    <input id="car_details-0-abs_system" name="abs_system" type="checkbox" checked>
                                    <label for="car_details-0-abs_system">
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-ebd_system" class="col-md-3 col-form-label">EBD</label>
                            <div class="col-md-4">
                                <div class="checkbox-grey checkbox-nxt">
                                    <input id="car_details-0-ebd_system" type="checkbox" name="ebd_system" checked>
                                    <label for="car_details-0-ebd_system">
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label for="car_details-0-esp_system" class="col-md-3 col-form-label">ESP</label>
                            <div class="col-md-4">
                                <style>
                            .checkbox-grey {
        border: 2px solid #ededed;
        display: inline-block;
        padding: 1px;
        /* width: 100%; */
    }
    .checkbox-grey label {
        display: inline-block;
        position: relative;
        /* padding-left: 20px; */
        /* line-height: 20px; */
    }
    .checkbox-nxt input[type="checkbox"]:checked+label::before {
        background-color: #01a9ac;
    }
    .checkbox-primary input[type="checkbox"]:checked+label::after {
        color: #fff;
    }
    .checkbox-grey input[type="checkbox"]:checked+label::after {
        font-family: 'FontAwesome';
        content: "\f00c";
    }
    .checkbox-grey label::after {
        display: inline-block;
        position: absolute;
        width: 25px;
        height: 25px;
        left: -1px;
        top: -12px;
        margin-left: -15px;
        padding-left: 3px;
        padding-top: 1px;
        font-size: 23px;
        color: #fff;
    }

    .checkbox-grey label::before {
        content: "";
        display: inline-block;
        position: absolute;
        top: -14px;
        width: 37px;
        height: 37px;
        left: 0;
        right: 0;
        text-align: center;
        margin-left: -20px;
        border: 1px solid #ccc;
        border-radius: 0;
        background-color: #f5f5f5;
        -webkit-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
        transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
    }

                                </style>
                                <div class="checkbox-grey checkbox-nxt">
                                    <input id="car_details-0-esp_system" name="esp_system" type="checkbox" checked>
                                    <label for="car_details-0-esp_system">
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cars-other">
            <div class="card-header">
                <h4>Other</h4>
                <div class="sub-title"></div>
            </div>
            <div class="card-block">

                <div class="form-group row">
                    <label for="car_features-0-required_license_category" class="col-md-3 col-form-label">Required
                        category of driving license</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-required_license_category"
                                name="required_license_category">
                            <option value="A">A</option>
                            <option value=" A1 "> A1</option>
                            <option value="ABM"> A or B or M</option>
                            <option value=" B "> B</option>
                            <option value=" B1 "> B1</option>
                            <option value=" BE "> BE</option>
                            <option value=" M "> M</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-seats" class="col-md-3 col-form-label">Seats</label>
                    <div class="col-md-4">
                        <input class="form-control" type="number" name="seats" min="0" id="car_features-0-seats">
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-number_of_doors" class="col-md-3 col-form-label">Number of doors</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-number_of_doors" name="number_of_doors">
                            <option value="2">2</option>
                            <option value="4">4</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-air_conditioning" class="col-md-3 col-form-label">Air
                        Conditioning</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-air_conditioning" name="air_conditioning">
                            <option value="Air Conditioning">Air Conditioning</option>
                            <option value="1-zone climate control">1-zone climate control</option>
                            <option value="2-zone climate control">2-zone climate control</option>
                            <option value="4-zone climate control">4-zone climate control</option>
                            <option value="None">None</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-interior" class="col-md-3 col-form-label">Interior</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-interior" name="interior">
                            <option value="Fabric">Fabric</option>
                            <option value="Leather">Leather</option>
                            <option value="Sport">Sport</option>
                            <option value="Sport leather">Sport leather</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-roof" class="col-md-3 col-form-label">Roof</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-roof" name="roof">
                            <option value="Standard">Standard</option>
                            <option value="Sunroof">Sunroof</option>
                            <option value="Rigid foldable automatic">Rigid foldable automatic</option>
                            <option value="Soft foldable manual">Soft foldable manual</option>
                            <option value="Soft foldable automatic">Soft foldable automatic</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-powered_windows" class="col-md-3 col-form-label">Powered Windows</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-powered_windows" name="powered_windows">
                            <option value="None">None</option>
                            <option value="2">2</option>
                            <option value="4">4</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-airbags" class="col-md-3 col-form-label">Airbags</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-airbags" name="airbags">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-side_wheel" class="col-md-3 col-form-label">Side Wheel</label>
                    <div class="col-md-4">
                        <select class="form-control" id="car_features-0-side_wheel" name="side_wheel">
                            <option value="Left">Left</option>
                            <option value="Right">Right</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-cruise_control" class="col-md-3 col-form-label">Cruise control</label>
                    <div class="col-md-4">
                        <div class="checkbox-grey checkbox-nxt">
                            <input id="car_features-0-cruise_control" name="cruise_control" type="checkbox" checked>
                            <label for="car_features-0-cruise_control">
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-rear_view_camera" class="col-md-3 col-form-label">Rear view
                        camera</label>
                    <div class="col-md-4">
                        <div class="checkbox-grey checkbox-nxt">
                            <input id="car_features-0-rear_view_camera" name="rear_view_camera" type="checkbox" checked>
                            <label for="car_features-0-rear_view_camera">
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="car_features-0-parking_assist" class="col-md-3 col-form-label">Parking assist</label>
                    <div class="col-md-4">
                        <style>
                            .checkbox-grey {
        border: 2px solid #ededed;
        display: inline-block;
        padding: 1px;
        /* width: 100%; */
    }
    .checkbox-grey label {
        display: inline-block;
        position: relative;
        /* padding-left: 20px; */
        /* line-height: 20px; */
    }
    .checkbox-nxt input[type="checkbox"]:checked+label::before {
        background-color: #01a9ac;
    }
    .checkbox-primary input[type="checkbox"]:checked+label::after {
        color: #fff;
    }
    .checkbox-grey input[type="checkbox"]:checked+label::after {
        font-family: 'FontAwesome';
        content: "\f00c";
    }
    .checkbox-grey label::after {
        display: inline-block;
        position: absolute;
        width: 25px;
        height: 25px;
        left: -1px;
        top: -12px;
        margin-left: -15px;
        padding-left: 3px;
        padding-top: 1px;
        font-size: 23px;
        color: #fff;
    }

    .checkbox-grey label::before {
        content: "";
        display: inline-block;
        position: absolute;
        top: -14px;
        width: 37px;
        height: 37px;
        left: 0;
        right: 0;
        text-align: center;
        margin-left: -20px;
        border: 1px solid #ccc;
        border-radius: 0;
        background-color: #f5f5f5;
        -webkit-transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
        transition: border 0.15s ease-in-out, color 0.15s ease-in-out;
    }

                        </style>
                        <div class="checkbox-grey checkbox-nxt">
                            <input id="car_features-0-parking_assist" name="parking_assist" type="checkbox" checked>
                            <label for="car_features-0-parking_assist">
                            </label>
                        </div>
                    </div>
                </div>
                <!-- Repeat the pattern for the other fields -->
            </div>
        </div>

        <div class="cars-music">
            <div class="card-header">
                <h4>Music</h4>
                <div class="sub-title"></div>
            </div>
            <div class="card-block">
                <div class="row">
                    <div class="col-lg-12">
                        <style>
    /* Apply a border to the checkbox container and set equal width for checkboxes */
    .checkbox-color {
      border: 2px solid #ededed;
      display: inline-block; /* Ensures that the container does not stretch to full width */
      padding: 1px; /* Optional padding to create space around the checkboxes */
      width: 100%;
    }

    /* Style the checkboxes inside the container */
    .checkbox-color input[type="checkbox"] {
      width: 20px; /* Set the width for checkboxes (adjust as needed) */
      height: 20px; /* Set the height for checkboxes (adjust as needed) */
      margin-right: 5px; /* Optional spacing between checkboxes */
      box-sizing: border-box; /* Includes the border width in the specified width */
    }




                        </style>
                        <div class="form-row">
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_radio" name="has_radio" type="checkbox" checked>
                                    <label for="car_audio_features-0-has_radio">
                                        Radio
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_audio_cd" name="has_audio_cd" type="checkbox"
                                           checked>
                                    <label for="car_audio_features-0-has_audio_cd">
                                        Audio-CD
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_mp3" type="checkbox" name="has_mp3" checked>
                                    <label for="car_audio_features-0-has_mp3">
                                        MP3
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_usb" name="has_usb" type="checkbox" checked>
                                    <label for="car_audio_features-0-has_usb">
                                        USB
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_aux" type="checkbox" name="has_aux" checked>
                                    <label for="car_audio_features-0-has_aux">
                                        AUX
                                    </label>
                                </div>
                            </div>
                            <div class="form-group col-md-2">
                                <div class="checkbox-color checkbox-primary">
                                    <input id="car_audio_features-0-has_bluetooth" type="checkbox" name="has_bluetooth"
                                           checked>
                                    <label for="car_audio_features-0-has_bluetooth">
                                        Bluetooth
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cars-gallery">

            <div class="card-header">
                <h4>Cars Gallery</h4>
            </div>
            <div class="card-block">
                <div class="sub-title">Upload your car pictures here.</div>
                <input type="file" name="car_gallery" id="car-gallery" multiple="multiple">
            </div>
        </div>

        <div class="cars-registration">
            <div class="card-header">
                <h4>Vehicle Registration Certificate</h4>
            </div>
            <div class="card-block">
                <div class="sub-title">Images and information will not be available to customers. This is required for
                    internal use only.
                </div>
                <div class="col-lg-6">
                    <input type="file" name="vehicle_registration_certificate" id="filer_input2" multiple="multiple">
                </div>
            </div>
        </div>
        <div class="submit-button">
            <button type="submit" class="btn btn-primary"> Save and add to sales</button>
        </div>
    </form>


    <script>

$(document).ready(function () {

    $('#car-form').submit(function (event) {
        event.preventDefault();

        // Reset previous validation styles and messages
        resetValidationStyles();

        // Validate form fields
        if (!validateForm()) {
            return;
        }

        var formData = new FormData(this);

        $.ajax({
            type: 'POST',
            url: '{% url "edit_car" %}',
            data: formData,
            processData: false,
            contentType: false,
            success: function (data) {
                console.log(data);
                // Update the UI or redirect the user as needed
            },
            error: function (error) {
                console.log(error.responseText);
            }
        });
    });

    // Function to validate form fields
    function validateForm() {
        var valid = true;

        // Validate each form field with data-validate attribute
        $('#car-form [data-validate]').each(function () {
            var field = $(this);
            if (field.val().trim() === '') {
                // Set field to red
                field.addClass('error');
                // Show specific error message based on field name
                showError(field.attr('name'), 'Please fill in the ' + field.attr('name') + ' field.');
                valid = false;
            }
        });

        return valid;
    }

    // Function to show specific error messages
    function showError(fieldName, message) {
        $('#' + fieldName + '-error').text(message).show();
    }

    // Function to reset validation styles and messages
    function resetValidationStyles() {
        $('#car-form input[data-validate]').removeClass('error');
        $('[id$="-error"]').hide().text('');
    }

});

</script>

<style>
    input.error {
        border: 1px solid red;
    }

    #error-message {
        color: red;
        margin-top: 10px;
        display: none;
    }
</style>

</div>
{% endblock %}
</body>
</html>